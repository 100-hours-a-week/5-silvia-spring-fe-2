{"ast":null,"code":"var _jsxFileName = \"/Users/moolmin/Documents/GitHub/5-silvia-spring-fe/src/components/ProfileEditForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { NicknameInputField } from './InputField';\nimport ProfileImgPicker from \"./ProfileImgPicker\";\nimport * as Buttons from \"./Buttons\";\nimport ToastMessage from \"./ToastMessage\";\nimport Modal from '../components/Modal';\nimport useUserData from '../hooks/useUserData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfileEditForm = () => {\n  _s();\n  const [successLabel, setSuccessLabel] = useState('');\n  const [errorLabel, setErrorLabel] = useState('');\n  const {\n    userId\n  } = useParams();\n  const {\n    nickname,\n    email,\n    // showToast,\n    setNickname,\n    updateNickname\n  } = useUserData(userId);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const handleNicknameChange = e => {\n    setNickname(e.target.value);\n  };\n  const handleImageUrlChange = newImageUrl => {\n    if (newImageUrl) {\n      console.log('New Image URL:', newImageUrl);\n    } else {\n      console.error(\"Received undefined image URL\");\n    }\n  };\n  const clearLabels = () => {\n    setSuccessLabel('');\n    setErrorLabel('');\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!nickname) {\n      setErrorLabel('🥑 닉네임을 입력해주세요.');\n      return;\n    }\n    try {\n      await updateNickname(nickname);\n      setSuccessLabel('🥑 닉네임 수정이 완료되었습니다.');\n      // setTimeout(() => {\n      //     window.location.reload();\n      // }, 2000);\n    } catch (error) {\n      setErrorLabel(`Error: ${error.message}`);\n    }\n  };\n  const showModal = () => {\n    setIsModalVisible(true);\n    document.body.style.overflow = 'hidden';\n  };\n  const closeModal = () => {\n    setIsModalVisible(false);\n    document.body.style.overflow = 'auto';\n  };\n  const handleAccountDelete = async () => {\n    try {\n      const response = await fetch(`http://localhost:3001/api/accounts/${userId}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n      if (response.ok) {\n        alert('계정이 삭제되었습니다 (҂ ꒦ິヮ꒦ິ)');\n        console.log('User and associated posts deleted successfully');\n        window.location.href = '/login';\n      } else {\n        const errorMessage = await response.text();\n        throw new Error(errorMessage);\n      }\n    } catch (error) {\n      console.error('Error deleting account:', error);\n      setErrorLabel(`Error: ${error.message}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"ProfileEditGroup-Img\",\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ProfileEditGroup\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ProfileEditFormLabel\",\n        style: {\n          marginTop: '20px'\n        },\n        children: \"\\uD504\\uB85C\\uD544 \\uC0AC\\uC9C4*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ProfileImgPicker, {\n        userId: userId,\n        onImageUrlChange: handleImageUrlChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ProfileEditGroup\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ProfileEditFormLabel\",\n        style: {\n          marginTop: '36px'\n        },\n        children: \"\\uC774\\uBA54\\uC77C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ProfileEditFormLabel\",\n      children: \"\\uB2C9\\uB124\\uC784\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(NicknameInputField, {\n      value: nickname,\n      onChange: handleNicknameChange,\n      placeholder: \"\\uB2C9\\uB124\\uC784\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ProfileSubmitBtn\",\n      children: /*#__PURE__*/_jsxDEV(Buttons.SubmitBtn, {\n        label: \"수정하기\",\n        type: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Text14\",\n      onClick: showModal,\n      style: {\n        marginTop: '12px',\n        display: 'block',\n        textAlign: 'center',\n        cursor: 'pointer',\n        fontWeight: '500'\n      },\n      children: \"\\uD68C\\uC6D0 \\uD0C8\\uD1F4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isVisible: isModalVisible,\n      ModalLabel: \"\\uD68C\\uC6D0\\uD0C8\\uD1F4 \\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\",\n      ModalContent: \"\\uC791\\uC131\\uB41C \\uAC8C\\uC2DC\\uAE00\\uACFC \\uB313\\uAE00\\uC740 \\uC0AD\\uC81C\\uB429\\uB2C8\\uB2E4.\",\n      onClose: closeModal,\n      onConfirm: handleAccountDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ToastMessage, {\n      successLabel: successLabel,\n      errorLabel: errorLabel,\n      clearLabels: clearLabels\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n};\n_s(ProfileEditForm, \"zj5m4jUKF48qSQBJz8UPG3I/7H8=\", false, function () {\n  return [useParams, useUserData];\n});\n_c = ProfileEditForm;\nexport default ProfileEditForm;\nvar _c;\n$RefreshReg$(_c, \"ProfileEditForm\");","map":{"version":3,"names":["React","useState","useParams","NicknameInputField","ProfileImgPicker","Buttons","ToastMessage","Modal","useUserData","jsxDEV","_jsxDEV","ProfileEditForm","_s","successLabel","setSuccessLabel","errorLabel","setErrorLabel","userId","nickname","email","setNickname","updateNickname","isModalVisible","setIsModalVisible","handleNicknameChange","e","target","value","handleImageUrlChange","newImageUrl","console","log","error","clearLabels","handleSubmit","preventDefault","message","showModal","document","body","style","overflow","closeModal","handleAccountDelete","response","fetch","method","credentials","ok","alert","window","location","href","errorMessage","text","Error","className","onSubmit","children","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","onImageUrlChange","onChange","placeholder","SubmitBtn","label","type","onClick","display","textAlign","cursor","fontWeight","isVisible","ModalLabel","ModalContent","onClose","onConfirm","_c","$RefreshReg$"],"sources":["/Users/moolmin/Documents/GitHub/5-silvia-spring-fe/src/components/ProfileEditForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { NicknameInputField } from './InputField';\nimport ProfileImgPicker from \"./ProfileImgPicker\";\nimport * as Buttons from \"./Buttons\";\nimport ToastMessage from \"./ToastMessage\";\nimport Modal from '../components/Modal';\nimport useUserData from '../hooks/useUserData';\n\nconst ProfileEditForm = () => {\n    const [successLabel, setSuccessLabel] = useState('');\n    const [errorLabel, setErrorLabel] = useState('');\n    const { userId } = useParams();\n    const {\n        nickname,\n        email,\n        // showToast,\n        setNickname,\n        updateNickname\n    } = useUserData(userId);\n\n    const [isModalVisible, setIsModalVisible] = useState(false);\n\n    const handleNicknameChange = (e) => {\n        setNickname(e.target.value);\n    };\n\n    const handleImageUrlChange = (newImageUrl) => {\n        if (newImageUrl) {\n            console.log('New Image URL:', newImageUrl);\n        } else {\n            console.error(\"Received undefined image URL\");\n        }\n    };\n\n    const clearLabels = () => {\n        setSuccessLabel('');\n        setErrorLabel('');\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        if (!nickname) {\n            setErrorLabel('🥑 닉네임을 입력해주세요.');\n            return;\n        }\n\n        try {\n            await updateNickname(nickname);\n            setSuccessLabel('🥑 닉네임 수정이 완료되었습니다.');\n            // setTimeout(() => {\n            //     window.location.reload();\n            // }, 2000);\n        } catch (error) {\n            setErrorLabel(`Error: ${error.message}`);\n        }\n    };\n\n    const showModal = () => {\n        setIsModalVisible(true);\n        document.body.style.overflow = 'hidden';\n    };\n\n    const closeModal = () => {\n        setIsModalVisible(false);\n        document.body.style.overflow = 'auto';\n    };\n\n    const handleAccountDelete = async () => {\n        try {\n            const response = await fetch(`http://localhost:3001/api/accounts/${userId}`, {\n                method: 'DELETE',\n                credentials: 'include'\n            });\n            if (response.ok) {\n                alert('계정이 삭제되었습니다 (҂ ꒦ິヮ꒦ິ)');\n                console.log('User and associated posts deleted successfully');\n                window.location.href = '/login';\n            } else {\n                const errorMessage = await response.text();\n                throw new Error(errorMessage);\n            }\n        } catch (error) {\n            console.error('Error deleting account:', error);\n            setErrorLabel(`Error: ${error.message}`);\n        }\n    };\n\n\n    return (\n        <form className=\"ProfileEditGroup-Img\" onSubmit={handleSubmit}>\n            <div className=\"ProfileEditGroup\">\n                <div className=\"ProfileEditFormLabel\" style={{ marginTop: '20px' }}>프로필 사진*</div>\n                <ProfileImgPicker userId={userId} onImageUrlChange={handleImageUrlChange} />\n            </div>\n            <div className=\"ProfileEditGroup\">\n                <div className=\"ProfileEditFormLabel\" style={{ marginTop: '36px' }}>이메일</div>\n                <p>{email}</p>\n            </div>\n            <div className=\"ProfileEditFormLabel\">닉네임</div>\n            <NicknameInputField\n                value={nickname}\n                onChange={handleNicknameChange}\n                placeholder=\"닉네임을 입력해주세요\"\n            />\n            <div className=\"ProfileSubmitBtn\">\n                <Buttons.SubmitBtn\n                    label={\"수정하기\"}\n                    type=\"submit\"\n                />\n            </div>\n            <div className=\"Text14\" onClick={showModal}\n                 style={{ marginTop: '12px', display: 'block', textAlign: 'center', cursor: 'pointer', fontWeight: '500' }}>회원 탈퇴\n            </div>\n            {/*{showToast && (*/}\n            {/*    <div className=\"ToastMessageContainer\">*/}\n            {/*        <ToastMessage successLabel={successLabel} errorLabel={errorLabel} clearLabels={clearLabels} />*/}\n            {/*    </div>*/}\n            {/*)}*/}\n            <Modal\n                isVisible={isModalVisible}\n                ModalLabel=\"회원탈퇴 하시겠습니까?\"\n                ModalContent=\"작성된 게시글과 댓글은 삭제됩니다.\"\n                onClose={closeModal}\n                onConfirm={handleAccountDelete}\n            />\n            <ToastMessage successLabel={successLabel} errorLabel={errorLabel} clearLabels={clearLabels} />\n        </form>\n    );\n};\n\nexport default ProfileEditForm;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,kBAAkB,QAAQ,cAAc;AACjD,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,OAAO,KAAKC,OAAO,MAAM,WAAW;AACpC,OAAOC,YAAY,MAAM,gBAAgB;AACzC,OAAOC,KAAK,MAAM,qBAAqB;AACvC,OAAOC,WAAW,MAAM,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACc,UAAU,EAAEC,aAAa,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM;IAAEgB;EAAO,CAAC,GAAGf,SAAS,CAAC,CAAC;EAC9B,MAAM;IACFgB,QAAQ;IACRC,KAAK;IACL;IACAC,WAAW;IACXC;EACJ,CAAC,GAAGb,WAAW,CAACS,MAAM,CAAC;EAEvB,MAAM,CAACK,cAAc,EAAEC,iBAAiB,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EAE3D,MAAMuB,oBAAoB,GAAIC,CAAC,IAAK;IAChCL,WAAW,CAACK,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;EAC/B,CAAC;EAED,MAAMC,oBAAoB,GAAIC,WAAW,IAAK;IAC1C,IAAIA,WAAW,EAAE;MACbC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,WAAW,CAAC;IAC9C,CAAC,MAAM;MACHC,OAAO,CAACE,KAAK,CAAC,8BAA8B,CAAC;IACjD;EACJ,CAAC;EAED,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACtBnB,eAAe,CAAC,EAAE,CAAC;IACnBE,aAAa,CAAC,EAAE,CAAC;EACrB,CAAC;EAED,MAAMkB,YAAY,GAAG,MAAOT,CAAC,IAAK;IAC9BA,CAAC,CAACU,cAAc,CAAC,CAAC;IAElB,IAAI,CAACjB,QAAQ,EAAE;MACXF,aAAa,CAAC,iBAAiB,CAAC;MAChC;IACJ;IAEA,IAAI;MACA,MAAMK,cAAc,CAACH,QAAQ,CAAC;MAC9BJ,eAAe,CAAC,qBAAqB,CAAC;MACtC;MACA;MACA;IACJ,CAAC,CAAC,OAAOkB,KAAK,EAAE;MACZhB,aAAa,CAAC,UAAUgB,KAAK,CAACI,OAAO,EAAE,CAAC;IAC5C;EACJ,CAAC;EAED,MAAMC,SAAS,GAAGA,CAAA,KAAM;IACpBd,iBAAiB,CAAC,IAAI,CAAC;IACvBe,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,QAAQ,GAAG,QAAQ;EAC3C,CAAC;EAED,MAAMC,UAAU,GAAGA,CAAA,KAAM;IACrBnB,iBAAiB,CAAC,KAAK,CAAC;IACxBe,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,QAAQ,GAAG,MAAM;EACzC,CAAC;EAED,MAAME,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,sCAAsC5B,MAAM,EAAE,EAAE;QACzE6B,MAAM,EAAE,QAAQ;QAChBC,WAAW,EAAE;MACjB,CAAC,CAAC;MACF,IAAIH,QAAQ,CAACI,EAAE,EAAE;QACbC,KAAK,CAAC,uBAAuB,CAAC;QAC9BnB,OAAO,CAACC,GAAG,CAAC,gDAAgD,CAAC;QAC7DmB,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;MACnC,CAAC,MAAM;QACH,MAAMC,YAAY,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;QAC1C,MAAM,IAAIC,KAAK,CAACF,YAAY,CAAC;MACjC;IACJ,CAAC,CAAC,OAAOrB,KAAK,EAAE;MACZF,OAAO,CAACE,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/ChB,aAAa,CAAC,UAAUgB,KAAK,CAACI,OAAO,EAAE,CAAC;IAC5C;EACJ,CAAC;EAGD,oBACI1B,OAAA;IAAM8C,SAAS,EAAC,sBAAsB;IAACC,QAAQ,EAAEvB,YAAa;IAAAwB,QAAA,gBAC1DhD,OAAA;MAAK8C,SAAS,EAAC,kBAAkB;MAAAE,QAAA,gBAC7BhD,OAAA;QAAK8C,SAAS,EAAC,sBAAsB;QAAChB,KAAK,EAAE;UAAEmB,SAAS,EAAE;QAAO,CAAE;QAAAD,QAAA,EAAC;MAAO;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACjFrD,OAAA,CAACN,gBAAgB;QAACa,MAAM,EAAEA,MAAO;QAAC+C,gBAAgB,EAAEpC;MAAqB;QAAAgC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3E,CAAC,eACNrD,OAAA;MAAK8C,SAAS,EAAC,kBAAkB;MAAAE,QAAA,gBAC7BhD,OAAA;QAAK8C,SAAS,EAAC,sBAAsB;QAAChB,KAAK,EAAE;UAAEmB,SAAS,EAAE;QAAO,CAAE;QAAAD,QAAA,EAAC;MAAG;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAC7ErD,OAAA;QAAAgD,QAAA,EAAIvC;MAAK;QAAAyC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACb,CAAC,eACNrD,OAAA;MAAK8C,SAAS,EAAC,sBAAsB;MAAAE,QAAA,EAAC;IAAG;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAC/CrD,OAAA,CAACP,kBAAkB;MACfwB,KAAK,EAAET,QAAS;MAChB+C,QAAQ,EAAEzC,oBAAqB;MAC/B0C,WAAW,EAAC;IAAa;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5B,CAAC,eACFrD,OAAA;MAAK8C,SAAS,EAAC,kBAAkB;MAAAE,QAAA,eAC7BhD,OAAA,CAACL,OAAO,CAAC8D,SAAS;QACdC,KAAK,EAAE,MAAO;QACdC,IAAI,EAAC;MAAQ;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,eACNrD,OAAA;MAAK8C,SAAS,EAAC,QAAQ;MAACc,OAAO,EAAEjC,SAAU;MACtCG,KAAK,EAAE;QAAEmB,SAAS,EAAE,MAAM;QAAEY,OAAO,EAAE,OAAO;QAAEC,SAAS,EAAE,QAAQ;QAAEC,MAAM,EAAE,SAAS;QAAEC,UAAU,EAAE;MAAM,CAAE;MAAAhB,QAAA,EAAC;IAChH;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAMNrD,OAAA,CAACH,KAAK;MACFoE,SAAS,EAAErD,cAAe;MAC1BsD,UAAU,EAAC,gEAAc;MACzBC,YAAY,EAAC,gGAAqB;MAClCC,OAAO,EAAEpC,UAAW;MACpBqC,SAAS,EAAEpC;IAAoB;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClC,CAAC,eACFrD,OAAA,CAACJ,YAAY;MAACO,YAAY,EAAEA,YAAa;MAACE,UAAU,EAAEA,UAAW;MAACkB,WAAW,EAAEA;IAAY;MAAA2B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC5F,CAAC;AAEf,CAAC;AAACnD,EAAA,CAzHID,eAAe;EAAA,QAGET,SAAS,EAOxBM,WAAW;AAAA;AAAAwE,EAAA,GAVbrE,eAAe;AA2HrB,eAAeA,eAAe;AAAC,IAAAqE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}